<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>ShareCore</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="ShareCore">
<meta property="og:url" content="http://sharecore.net/page/4/index.html">
<meta property="og:site_name" content="ShareCore">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ShareCore">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="ShareCore" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">ShareCore</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">J.H</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="http://weibo.com/justinhuang">微博</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="q" value="site:http://sharecore.net"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-技术的进化" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/20/技术的进化/" class="article-date">
  <time datetime="2014-07-20T15:58:29.000Z" itemprop="datePublished">2014-07-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/20/技术的进化/">技术的进化</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>前几日，吴军博士在微博上转发了王石为其新书《文明之光》写的序言。在序言里，王石提到了达尔文进化论在社会与技术的适应性问题。王石在他短短几句话里并未充分说明了他的观点，只是举了英文键盘的例子说明了<strong>存活下来的不一定更“好”，仅仅是更“适”而已</strong>。</p>
<p>我在微博上留下了一条评论：</p>
<blockquote>
<p>生物突变过程，并不一定是适合文明尤其是技术的进化的，好比如从帆船不可能突变到轮船，喷气机也不是内燃机或其它任何先前技术的变种，技术的进化更多是组合进化不太具有偶然性，而不是生物的单物种偶然性突变。</p>
</blockquote>
<p>用达尔文的理论去解释不同领域的演进,是许多人的偏好，尤其是国人。但是，无论觉得达尔文理论能如何为你切身地解答从哪而来的问题，将它放置于任何领域成为“大一统”的进化观点，我想是不合适的，至少将其置于技术的领域，是不完整的。尽管吴军博士回复说，《文明之光》一书并没有太谈进化论，我还是想把我的观点讲清楚。</p>
<p><strong>一.不完整的进化论理解</strong></p>
<p>达尔文的生物进化理论需要从两个方面来理解：<strong>变异与选择</strong>。由于某些历史与政治的原因，进化论被引进进入中国时，就被严复梁启超他们“阉割”了，只片面的强调了“选择”一含义，这也就是大多数人固有的“物竞天择，适者生存”的观点，而对其“变异”层面的含义却知之甚少。由于“进化就是选择”这一狭隘观点的影响，导致达尔文的理论被”泛滥“地解释所有的领域的发展，因为单从“选择”层面来看，其确实是适合其它领域的。当然，用来解释社会发展领域的发展，也是当初严复和梁启超他们原本目的。</p>
<p>如果说“进化就是选择”，那前面王石先生举的英文键盘一例来说进化，也是合理的（其实这也就是常说的”路径依赖“）。但是这样的观点如果奉成为“理论”，肯定是不完整的。选择论回答不了被选择的“物件”从何而来的疑问。而完整的达尔文理论认为<strong>变异为选择提供了资源</strong>。如果说”选择“解答了发展的问题，那”变异“则解答了起源的问题。在生物的进化上，这里的变异指的就是基因突变，并且是单个物种内的自身基因变化。</p>
<p>正是这种关乎基因突变的观点，将达尔文理论套到技术领域，是根本站不住脚的。比如雷达诞生于半导体，你可以对20世纪30年代的半导体线圈进行任何你喜欢的改变，但是你永远不可能得到雷达，制造雷达需要一个和半导体完全不同的理念。我前文微博里提到的帆船到轮船，喷气机到内燃机的也同样如此，无论你对帆船如何改造，没有革命性发动机出现，你不可能得到轮船，而发动机的出现，跟”船“这个”物种“不存在任何关系。而从喷气机到内燃机，也不是一脉的向前突变得到的，而是依赖完全不同的物理理论的出现。</p>
<p><strong>二.技术进化的特点</strong></p>
<p>那么技术领域的究竟如何向前进化的呢？技术作家布莱恩.阿瑟在其《技术的本质》一书里给出了一个初步的答案。布莱恩.阿瑟认为技术的进化具有以下两大特点</p>
<ul>
<li><strong>组合进化</strong></li>
</ul>
<p><strong>技术总是由一些基本的功能模块组合而成的</strong>。技术的组合进化，是技术演变的最本质特征，也是其不同与生物进化的根本区别。</p>
<p>在人类发展最初的石器时代，石制工具就被打磨成两类，锋利的和有孔的，这两类又与木制的手柄组合成复合工具，锋利的成了矛，有孔的成了锤头。回到现代，你打开一台老式的台式电脑，你会发现里面的零部件，如CPU，硬盘，内存条等。同时拆开一台现代的智能手机，也会发生同样的部件。同样，蒸汽机的出现，其与原来的帆船技术的组合，从而使得轮船得以出现服务于人类。<strong>技术在某种程度上一定是来自此前已有技术的新的组合</strong>，这是新技术出现的根本特征，也解答了进化论中关于”变异“那一部分问题。而这个组合进化产生变异的特征在生物体上是看不到的，生物的变异是指单个生物体的基因突变，而不同物种相互组合杂交而进化，几乎没出现过。</p>
<ul>
<li><strong>具有层级递归性模块化演进</strong></li>
</ul>
<p>技术是组合进化的，但是其不是单纯的一层组合，也就是说不是将具有匹配的概念或原理的目的单层次的聚集起来，即可得到新的技术。其组合具有层次结构。可以将技术分解成主集成，次级集成，次次级集成等，直至分解为最基本的部分。如果说整体的技术是树干的话，那次级集成是枝条，最基本的零件就是更小的分支了。以一本纸质书为例，其主集成是纸张和印刷的组合，而纸张和印刷两者可以继续拆分，如印刷可以拆分为油墨技术，电子技术等等。<strong>技术呈现出这种递归性的结构，技术总是包含着技术，直到最基础的水平</strong>。</p>
<p>如果只是将技术的单元进行层次化的组合，那将是一个无比复杂的工程。比如一个手表有1000个零件，一个钟表匠一个零件一个零件地安装，安装过程中，如果他的工作被打断了，他就必须从头开始。但是，如果将10个模块组装起来，每个模块又由10个子模块组装起来，每个子模块由10个零件组合起来，当他暂停或被打断工作时，他只是损失了一小部分工作。这种零件集成可以更好地预防不可预知的变动，且更易修复。同时，除了解决复杂性的带来的低效问题，模块化更为重要的一点是允许技术的组成部分分别演进，从而又再推动整体技术的前进。好比如发动机的这一模块的进步，可以推动汽车，轮船这些整体技术的进步一样。</p>
<p>当然，将技术分割为功能模块是需要付出一些代价的，比如需要耗费时间和精力定义模块之间的标准等。所以，<strong>只有模块能被反复使用，且反复使用的次数足够时，才值得付出代价将技术进行分割</strong>。</p>
<p><strong>三.技术进化的启示</strong></p>
<p>前面关于技术进化的特点的讨论，不只是让我们认识了技术进化的与生物进化的区别，更是能更好的指导我们构建更有生命力能向前进化的技术产品。回到我们熟悉的软件系统领域，我们见过太多技术产品被很快淘汰，也见过很多技术产品永远处于不断推倒后重构的死胡同里。从进化的角度看，这样的技术产品根本不存在进化的可能。这其中根本原因，我想更多是其没有满足我们前文说到的可进化技术的一些基本特点。一个没有组合特点的系统，其必然扩展性差，必然面临无法向前进一步进化的可能。而没有定义层次和规则，那也就没有模块化的概念，系统无法进行单个模块的垂直演进，没有模块级别的重用， 当碰到任何不可预知的变动，必然是全部推倒重新再来。这样的系统产品，当然也就不存在生命力可言。</p>
<p>对此审视我们用过的系统产品，那些经久不衰的，如Unix/Linux，必然是遵循这技术进化的根本特征的。而对于当今互联网产品而言，生命力确实是一个奢侈的词，这应该不仅仅是生态环境的选择问题,而需要系统产品生产者更多的反思！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://sharecore.net/2014/07/20/技术的进化/" data-id="cipdze13f001bogspi4z5ij1q" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/常识/">常识</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术/">技术</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-不确定性与马尔科夫链" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/13/不确定性与马尔科夫链/" class="article-date">
  <time datetime="2014-07-13T15:59:25.000Z" itemprop="datePublished">2014-07-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/13/不确定性与马尔科夫链/">不确定性与马尔科夫链</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <pre><code><span class="keyword">*</span>这个月玩公司的世界杯竞猜游戏，期间经历了各种跌宕起伏，有过竞猜游戏币被清零的记录（后来贷款翻身），也有过“一夜暴富”荣登榜首的时候（多亏了乌拉圭人和巴西人），到现在理论上还保留着拿最后冠军的希望。游戏期间无数次想到了关于“不确定性”的理论，结合以前读书的一些所获，如是有了今天的文字。<span class="keyword">*</span>
</code></pre><h2 id="一-不确定性">一.不确定性</h2><p><strong>1. 不确定性含义</strong></p>
<p>所谓不确定性，是指超越人类理性驾驭而无法预测的事情。我们生活充满了不确定性。比如：</p>
<ul>
<li><p>深圳下半年的房价是会上涨还是下跌？</p>
</li>
<li><p>某互联网公司明年的股票走势如何？</p>
</li>
<li><p>人类的的所有家务劳动，在未来一百年内会不会可以被机器人取代呢？</p>
</li>
</ul>
<p>对于不确定性，其实有两个层面的含义，<strong>第一层理解是事物本身不能确定;第二层理解是事物本身是确定的，只是人类无法预知，或者预知要花费的成本不是人类有生之年可以承受的</strong>。这两层含义，暂时是无法被证实或证伪的。这就好比如无法证明上帝是否存在一样，但是基督教通过“信仰”来解决，他们告诉你：上帝是存在的，你希望他在他就在，你信他在他就在。</p>
<p>人类对于不确定性有着天生的恐惧，生活在不确定性的世界里的人没有安全感。人类诞生之日起就开始了寻找真理之路。为什么要寻找真理呢？无非就是为自身提供一种安全感。在一个不确定性的世界里，人类不知道自己下一秒自己的命运或财富会不会颠覆，甚至连生命也没法得到保证，所以才会愿意牺牲部分个体活动的自由，集结成群，甚至是让少数人凌驾于自身之上，组织成政府，以取得安全感与保护。</p>
<p><strong>2. 不确定性的根源解释</strong></p>
<p>关于不确定性的根源，哲学与科学上已知的解释有两个：<strong>非线性与不确定性原理</strong>。</p>
<p><strong>非线性</strong></p>
<p>常见的线性思考：</p>
<ul>
<li><p>只要每天多比别人工作2小时，就能产生好的绩效，拿更多的奖金</p>
</li>
<li><p>只要赚到足够的钱，买房买车，心爱的妹子就会嫁给你</p>
</li>
<li><p>经济危机时，只要多发货币就能刺激经济增长（凯恩斯主义）</p>
</li>
<li><p>某公司因为抄袭所以获得了成功</p>
</li>
</ul>
<p>这种简单的“只要…就…”，“因为…所以…“，就是典型的线性逻辑，也是人类大脑天生的默认工作模式，也被称为是一种”思考懒惰“。可是，事物的状态的确定并不是单纯的线性逻辑。多工作两小时，如果工作方向不对，工作方式效率低下，同时身体的精力也是有限，无法长期坚持长时间的工作，能不能产生好的绩效是不确定的;赚到足够的钱，但同时不能忘了，还有很多人跟你一样赚钱买房买车，甚至比你赚的更多，妹子的选择也就更多，最后嫁给你还是嫁给别人也是不确定的。凯恩斯主义就更不用说了，几年前的4万亿产生的后果，你我不都正在尝着吗？某公司抄袭，可是跟它一样抄袭的公司多了去了，最后都剩下的却寥寥无几。</p>
<p>事物的发展按照的是非线性逻辑，决定了事物具有”不确定性“的天然属性。事物初始条件的细微变化都可能引起事物发展方向的极大扭转，以致我们无法预料。如蝴蝶效应，墨菲定律说的就是这个。</p>
<p><strong>不确定性原理</strong></p>
<p><strong>不确定性原理</strong>是量子物理学上的一个概念，它表明<strong>粒子的位置和动量不可同时被确定</strong>。由德国的量子力学奠基人之一维尔纳·海森堡提出，也称为”海森堡不确定性原理“。<strong>不确定性原理从量子层面解释了不确定性是物质的固有属性</strong>。</p>
<p>通常情况下，不确定性原理易与为大家所熟悉的”<strong>观察者效应</strong>“所混淆，观察者效应是指被观察的现象会因为观察行为本身而受到一定程度或者很大程度的影响，也就是说由于事物被观察了，从而导致了它的行为路径发生变化。但这两者是不同的，观察者效应强调的是观察本身对事物的发展所产生的影响，而海森堡不确定性原理强调的是事物本身所具有的属性，跟观察本身无关,这点是需要注意的。</p>
<p>前文说到人类对于不确定性有着天生的恐惧，而事物本身具有不确定的天然属性，这里存在着矛盾。而这种矛盾，正是<strong>激励人类不断向前追求真理的最大动力</strong>。但不管追求真理之路向前走多远，对确定性的知识掌握总是有限，同时，对于一个个体来讲，由于精力和智力所限，能掌握的确定性知识也更为有限。以至于完全靠真理和知识来克服对不确定性的恐惧，是不现实的。为了在真理和知识缺乏的情况下作出准确（或合适）的决策判断，人类学会了<strong>概率思考</strong>，即从事物的历史发展轨迹中统计分析将来的发展方向。建立了较为完善的数理分析理论，比如提出常见中心极限定理、正态分布、二项式分布等基础的统计知识理论。</p>
<p>在读吴军的《数学之美》一书，对于其中提到的<strong>马尔科夫链</strong>预测模型印象颇为深刻。马尔科夫链就是一个非常简单的概率思考模型。</p>
<h2 id="二-马尔科夫链">二.马尔科夫链</h2><p>前文说到，随着时间的发展，事物所呈现的状态是不确定的，也可以称为是随机的。比如我们可以将<em>s1,s2,s3….st,…</em>看成是这一个月来深圳每天的最高气温，这里的每个<em>st</em>都是随机的。同时，事物的每个状态可能与它周围其它的状态相关，比如这一个月每天的最高气温，可能与深圳前段时间的最高气温相关。如果要把每个决定因素考虑进来，将会无比复杂，超出认知预测的范围。为此，俄罗斯数学家安德烈·马尔可夫提出简化的假设：<strong>假设事物每个状态，只与它的前一状态相关,而不考虑历史其它状态</strong>。比如，我们预测明天的气温，只考虑今天气温，而硬性规定不考虑前天的气温情况。由于，这种状态转换的呈现出链表的形式，所以也称为<strong>马尔科夫链</strong>。</p>
<p>日常生活中，有很多事情可以用马尔科夫假设来简化的。比如在我们行走时，我们的下一位置，一般只与我们当前的位置（假设为5）有关，我们向前一步，位置就+1（即为6）,向后一步位置就-1（即为4），这个下一位置与我们当前位置之前的位置（1,2,3,4）没有关系，可以忽略。当然，并不是每个事物都满足马尔科夫假设，比如彩票。</p>
<p>而将<strong>马尔科夫假设与事物状态转换概率结合来</strong>就可以建立一个简单的预测模型。我们以天气预测的例子来说明:</p>
<p>根据日常经验，我们看到当前的天气状态是多云时，天气的下一个状态可能会是下雨;而当雨水开始消退，云也减少时，接下来可能就是天晴了。我们收集某个地区十年内的天气数据，计算出每种天气（暂时限制为三种：多云，晴天，雨天）之间相互转化的概率，统计结果如下表：</p>
<p><img src="/images/markov_table.jpg" style="width:500px"></p>
<p>以上转换表可以用<strong>状态机</strong>来表示：</p>
<p><img src="/images/markov_list.jpg" style="width:500px"></p>
<p>也可以用<strong>状态转换矩阵M</strong>来表示：</p>
<p><img src="/images/markov_matrix.jpg" style="width:500px"></p>
<p>有了状态转换矩阵，通过基本的矩阵运算，就可以对下一天气状态进行预测了。假设当前状态是多云，即100%确认当前天气为多云，可以用<strong>向量V</strong>来表示：</p>
<p><img src="/images/markov_vector.jpg" style="width:500px"></p>
<p>对下一状态的预测可以通过以下运算求得：</p>
<ul>
<li>下一状态S2 = V&times;M = [(1 &times;0.1 + 0&times;0.3 + 0&times;0.4); (1&times;0.5 + 0&times;0.6 + 0&times;0.1); (1&times;0.4 + 0&times;0.1 + 0&times;0.5)]<br>= [0.1; 0.5; 0.4];*</li>
</ul>
<p>即可得下一状态多云的概率为0.1,雨天的概率为0.5,晴天的概率为0.4，雨天的可能性最大</p>
<p>继续计算下一状态S3</p>
<p><em>S3 = S2&times;M =[(0.1&times;0.1 + 0.5&times;0.3 + 0.4&times;0.4); (0.1&times;0.5 + 0.5&times;0.6 + 0.4&times;0.1); (0.1&times;0.4 + 0.5&times;0.1 + 0.4&times;0.5)]<br>= [0.32; 0.39; 0.29];</em></p>
<p>不出意料，雨天的可能性还是最大。无论再计算多少步，结果都会是雨天的可能性最大。这是为什么呢？是因为状态转换表只保存了最后的一个状态的信息，所有的状态转换只与最后一个状态信息相关，所以，接下来的状态也就逃脱不出初始状态的约束了。这种只考虑最后一个状态信息的马尔科夫链称为<strong>1阶马尔科夫链</strong>。那如如果要提高准确性，使得下一状态不只是受上一状态的约束，该怎么做呢？可能你已经想到了，提升到<strong>多阶马尔科夫链*</strong>即可。比如2阶马尔科夫链的转换概率表可以用如下的表格来表示（只画出了1/3部分，其它部分依次类推，共会有18种组合）：</p>
<p><img src="/images/markov_table_2.jpg" style="width:500px"></p>
<p>以上2阶状态转换表，表明了下一天气状态是由最后两天的天气决定，由它计算出来的结果准确性会比1阶的矩阵计算结果要高，随着阶数的继续递增，准确性也会相应的提高。可是这个提高是有代价的，阶数越高，计算的复杂性也就越大，而且是呈指数级的增长而<strong>非线性</strong>的增长。当阶数增大一定程度，计算的复杂度超过人类现有的计算能力范围后，问题也就变成了<strong>不确定性问题</strong>了。</p>
<h2 id="总结：">总结：</h2><p>世界万物具有本质的不确定性，人类由于对不确定性的恐惧而选择追逐真理。但是，完全靠真理来克服对不确定性的恐惧是不现实的，有时候我们需要学会接受不确定性，并通过概率思考来来对不确定性作出决策判断。马尔科夫链模型就是一个非常简单的概率决策模型，是很好的概率思考实践。</p>
<p>最后PS一条：如果你没法掌握足够的股票市场一手信息，遵循“买涨不买跌”的原则进行股票交易的话，会比你无意义的各种推测要好的多！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://sharecore.net/2014/07/13/不确定性与马尔科夫链/" data-id="cipdze13v0022ogspr33tkp8n" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/复杂性/">复杂性</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/常识/">常识</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-可扩展架构设计的三个维度" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/05/可扩展架构设计的三个维度/" class="article-date">
  <time datetime="2014-07-04T16:00:01.000Z" itemprop="datePublished">2014-07-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/05/可扩展架构设计的三个维度/">可扩展架构设计的三个维度</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>业界对于可扩展的系统架构设计有一个朴素的理念,就是：</p>
<p><strong>通过加机器就可以解决容量和可用性问题</strong></p>
<p>这一理念在“云计算”概念疯狂流行的今天，得到了广泛的认可！对于一个规模迅速增长的系统而言，容量和性能问题当然是首当其冲的。但是随着时间的向前，系统规模的增长，除了面对性能与容量的问题外，还需要面对功能与模块数量上的增长带来的系统复杂性问题以及业务的变化带来的提供差异化服务问题。而许多系统，在架构设计时并未充分考虑到这些问题，导致系统的重构成为常态，从而影响业务交付能力，还浪费人力财力！</p>
<p>对此，《可扩展的艺术》一书提出了一个更加系统的可扩展模型——<strong>AKF可扩展立方</strong>（Scalability Cube）。这个立方体中沿着三个坐标轴设置分别为：X、Y、Z。</p>
<pre><code>X轴扩展 —— 关注水平的数据和服务克隆，也就是前文提到的“加机器解决问题”
Y轴扩展 —— 关注应用中职责的划分，比如数据类型，交易执行类型的划分 
Z轴扩展 —— 关注服务和数据的优先级划分，如分地域划分
</code></pre><p>整个扩展模型，用下图来表示，其中原点代表完全无扩展的状态。</p>
<p><img src="/images/akf.jpg" style="width:500px"></p>
<p><strong>一.X轴扩展</strong></p>
<p>X轴扩展与我们前面朴素理念是一致的，通过绝对平等地复制服务与数据，以解决容量和可用性的问题。我们以生产汽车的工厂来举例：假设一个车间能完整的生产一辆汽车，为了短时间内生产更多的汽车，我们可以建设更多的车间，任何新增车间除了工作的效率可能不同之外，都是一个新的复制品，也能提供与原来车间相同的工作，生产出完整的汽车。给复制品分配工作就是一个X轴扩展的一个完美示例，说明了X轴扩展的思路，即把工作无偏向的分配给复制品，每个复制品在不考虑生产效率的情况下，谁来做这项工作是无偏向的,<strong>各个复制品之间不共享任何内容</strong>。</p>
<p>而在工程技术上来讲，X轴扩展主要有以下两种技术方案：</p>
<p><strong>1.负载均衡</strong></p>
<p>故名思议，负载均衡就是将用户的访问请求通过负载均衡器，均衡分配到由各个“复制品”组成的集群中去。当某个复制品出现故障，也能轻易地将相应“工作”转移给其它的复制品来“代为完成”。这中间涉及到的工程技术点包括了反向代理，DNS轮询，哈希负载均衡算法（一致性哈希），动态节点负载均衡（如按CPU，I/O）等。它的难点在于要求集群中的“复制品”是不共享任何内容，也就是我们常说的<strong>无状态</strong>。</p>
<p><strong>2.数据复制</strong></p>
<p>数据复制是指在数据存储层进行绝对平等地数据迁移，用于解决存储层I/O瓶颈以及可用性上的问题。由于存在多个复制品存储，为了使得每个复制品提供无差异的数据服务，我们需要在复制品之间同步或异步地复制数据。数据复制的方式包括了主从同步（常见的读/写分离），双主同步等。因为数据存储天生就是有状态的，数据复制的难点在于<strong>一致性</strong>的保证上，为了一致性的保证，从而也衍生了很多复杂的技术，比如Paxos选举算法等。</p>
<p><strong>二.Y轴扩展</strong></p>
<p>Y轴扩展表示的是根据数据的类型或者交易执行的类型（或者两者都有）来划分工作职责。一般称为面向服务或面向资源的扩展。我们再以生产汽车的工厂来举例：如亨利.福特所做的一样，将汽车制造的工序按专业性分成不同车间和流水线，不再是一个车间负责完成100%的任务，制造一辆完整的汽车，而是让这每个车间都执行一些子任务，如安装发动机，喷漆，安装玻璃等等。这样的分工，益处是明显的，每个车间负责的<strong>任务更简单</strong>，从而能更专业更高效的完成生产。</p>
<p>与汽车工厂的分工类似，为了降低系统复杂度，Y轴扩展会将庞大的整体应用拆分为一组服务。每个服务实现一组相关的功能，如订单管理、客户管理等。在工程上常见的方案是<strong>服务化架构(SOA)</strong>。比如对于一个电子商务平台，我们可以拆分成不同的服务，组成下面这样的架构：</p>
<p><img src="/images/soa.jpg" style="width:500px"></p>
<p>但通过观察上图容易发现，当服务数量增多时，服务调用关系变得复杂。为系统添加一个新功能，要调用的服务数也变得不可控，由此引发了服务管理上的混乱。所以，一般情况下，需要采用服务注册的机制形成服务网关来进行服务治理。系统的架构将变成下图所示：</p>
<p><img src="/images/soa1.jpg" style="width:500px"></p>
<p>同时，为了提升单个服务的可用性和容量，<strong>对每一个服务进行X轴扩展划分</strong>。</p>
<p><img src="/images/soa2.jpg" style="width:500px"></p>
<p><strong>三.Z轴扩展</strong></p>
<p>Z轴扩展通常是指基于请求者或用户独特的需求，进行系统划分，并使得划分出来的子系统是相互隔离但又是完整的。继续以生产汽车的工厂来举例：福特公司为了发展在中国的业务，或者利用中国的廉价劳动力，在中国建立一个完整的子工厂，与美国工厂一样，负责完整的汽车生产。这就是一种Z轴扩展。</p>
<p>对于系统而言，Z轴扩展一般是为了满足差异性的需求或者是为了安全隔离而采取的扩展措施。比如为了提供VIP用户服务，可以将系统完整地复制一份出来，与普通用户所使用的系统完全隔离开来;再如，针对不同的地域用户，系统自动切换到对应地域的子系统，为用户提供服务，都可以认为是Z轴扩展。同时，在系统的灰度部署上，我们也通常使用Z轴扩展来完成。</p>
<p>工程领域常见的Z轴扩展有以下两种方案：</p>
<p><strong>1.单元化架构</strong></p>
<p>在分布式服务设计领域，一个单元（Cell）就是满足某个分区所有业务操作的自包含闭环。如上面我们说到的Y轴扩展的SOA架构，客户端对服务端节点的选择一般是随机的，但是，如果在此加上Z轴扩展，那服务节点的选择将不再是随机的了，而是每个单元自成一体。如下图：</p>
<p><img src="/images/cell.jpg" style="width:500px"></p>
<p><strong>2.数据分区</strong></p>
<p>为了性能数据安全上的考虑，我们将一个完整的数据集按一定的维度划分出不同的子集。<br>一个分区（Shard），就是是整体数据集的一个子集。比如用尾号来划分用户，那同样尾号的那部分用户就可以认为是一个分区。数据分区为一般包括以下几种数据划分的方式：</p>
<pre><code>数据类型（如：业务类型）
数据范围（如：时间段，用户ID）
数据热度（如：用户活跃度，商品热度）
按读写分（如：商品描述，商品库存）
</code></pre><p>当然，数据分区也是有代价的，它将增加数据运维的难度，关联搜索的复杂度增加等。</p>
<p><strong>总结:</strong></p>
<p>一个在可扩展性上设计良好的系统，会充分考虑三个维度上的可扩展性。X轴上扩展处理的是平台或系统执行的交易量或工作量增长，虽然X轴扩展能够很好处理交易量的增长，但当系统复杂度的大幅度增加，或用户数量增加以及差异化服务需求出现，X轴扩展就难以应付了，如是我们可以通过Y轴扩展来处理系统复杂度增长的问题以及Z轴扩展来处理差异性化需求的问题。而当采用的扩展坐标轴不止一条时，那么<strong>X轴扩展总是其它扩展方法的次级划分</strong>。同时，这三个维度扩展性，使得系统性能上改善有了更多的方向，对于系统性能优化，也是至关重要。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://sharecore.net/2014/07/05/可扩展架构设计的三个维度/" data-id="cipdze13q001togspgwxtsms5" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术/">技术</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/架构/">架构</a></li></ul>

    </footer>
  </div>
  
</article>


  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/3/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/5/">Next &raquo;</a>
    </nav>
  
</section>
        
          <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Golang/">Golang</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/历史/">历史</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/基础知识/">基础知识</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/复杂性/">复杂性</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/学习/">学习</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/常识/">常识</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/技术/">技术</a><span class="tag-list-count">19</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/技术常识/">技术常识</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/春秋/">春秋</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/服务化/">服务化</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/架构/">架构</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/模式匹配/">模式匹配</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/测试/">测试</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/算法/">算法</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/读书/">读书</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">八月 2014</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">七月 2014</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06/">六月 2014</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05/">五月 2014</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03/">三月 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/01/">一月 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/09/">九月 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08/">八月 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/07/">七月 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/06/">六月 2013</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/03/">三月 2013</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/06/13/不平则鸣/">不平则鸣</a>
          </li>
        
          <li>
            <a href="/2016/06/13/人言无可畏/">人言无可畏</a>
          </li>
        
          <li>
            <a href="/2016/06/13/设计的思考/">设计的思考</a>
          </li>
        
          <li>
            <a href="/2016/06/13/解决问题的思路/">解决问题的思路</a>
          </li>
        
          <li>
            <a href="/2016/06/13/I-O模型基本介绍/">I/O模型基本介绍</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 J.H<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="http://weibo.com/justinhuang" class="mobile-nav-link">微博</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>